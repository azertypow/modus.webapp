import{g as A,y as I,i as e,k as j,o as a,c as n,a as t,t as h,z as R,x as f,b as B,w as H,d as Z,B as $,e as O,_ as P,q as G,F as g,m as J,p as F,f as N,u as U,r as k,h as K,C as Q,D as W,E as x,G as q}from"./entry.c89feb35.js";import{i as V,a as b,f as X,A as Y,b as C,_ as ee}from"./AppPage.5b4314ff.js";import"./precent.49c5763c.js";function te(i,c){const r=new Date(i),u=c?new Date(c):null,_={month:"long",year:"2-digit"},v=new Intl.DateTimeFormat("fr-FR",_),s=v.format(r);if(!u)return s;const y=v.format(u);return s===y?s:`${s} > ${y}`}const oe={class:"v-app-project-item__header"},ae=["src"],se={class:"v-app-project-item__header__date"},ne={class:"v-app-project-item__body child-remove-margin"},re={class:"v-app-project-item__title"},ie=["innerHTML"],ce={class:"v-app-project-item__bottom"},pe={class:"v-app-project-item__bottom__container"},de=["src"],_e={key:1,class:"v-app-project-item__header__type"},le={class:"v-app-project-item__bottom__container"},ue={key:0,class:"v-app-project-item__status-button",style:{"font-weight":"600","font-size":".75rem",border:"solid 2px",display:"flex","align-items":"center","justify-content":"center",gap:".5rem","border-radius":"2rem",padding:".015rem .5rem .025rem","min-width":"3rem","text-align":"center"}},ve={class:"v-app-project-item__bottom__container"},he=A({__name:"AppProjectItem",props:{projectType:{},title:{},content:{},img_src:{},slug:{},date_start:{},is_project_with_duration:{},date_end:{}},setup(i){const c=i;I(s=>({"689fe5dc":e(_)}));const r=j(()=>c.projectType?V[c.projectType]:null),u=j(()=>c.is_project_with_duration==="false"?null:c.date_end===void 0?"En cours":new Date(c.date_end).getTime()<new Date().getTime()?"Terminé":"En cours"),_=j(()=>u.value==="En cours"?"var(--app-color-orange)":"var(--app-color-main--dark)");function v(){$().push(`/project/${c.slug}`)}return(s,y)=>{const M=O;return a(),n("section",{class:"v-app-project-item",onClick:v},[t("div",oe,[t("img",{class:"v-app-project-item__header__img",alt:"project cover",src:s.img_src},null,8,ae),t("div",se,h(e(te)(s.date_start,s.date_end)),1)]),t("div",ne,[t("h4",re,h(s.title),1),t("div",{class:"v-app-project-item__content child-remove-margin",innerHTML:s.content},null,8,ie)]),t("div",ce,[t("div",pe,[t("div",{class:"v-app-project-item__bottom__icon-box",onClick:y[0]||(y[0]=R(z=>("useRouter"in s?s.useRouter:e($))().push({query:{q:s.projectType}}),["stop"]))},[e(r)?(a(),n("img",{key:0,class:"v-app-project-item__bottom__icon-box__img",alt:"project icon",src:`/project_type_icons/${e(r)}`},null,8,de)):f("",!0),s.projectType?(a(),n("h4",_e,h(e(b)[s.projectType]),1)):f("",!0)])]),t("div",le,[e(u)?(a(),n("div",ue,h(e(u)),1)):f("",!0),t("div",ve,[B(M,{class:"app-button app-button--small",href:`/project/${s.slug}`},{default:H(()=>[Z("Découvrir")]),_:1},8,["href"])])])])])}}});const me=P(he,[["__scopeId","data-v-e751d8fc"]]);function ye(i){return typeof i!="string"?(console.error("projectBody must be type of string"),null):JSON.parse(i).find(r=>r.type==="spotify"||r.type==="video")}const D=i=>(F("data-v-080137ad"),i=i(),N(),i),fe=["src"],je={class:"v-app-project-media__header"},ge={class:"v-app-project-media__header__title app-font-h1"},we={class:"v-app-project-media__header__headerTitle app-font-h4"},$e={key:0,class:"v-app-project-media__details"},Te={class:"app-font-small"},ke={key:0,class:"app-font-small"},qe=D(()=>t("div",{class:"v-app-project-media__player-wrap__title app-font-small"}," accéder au podcast ",-1)),be=D(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:"white",class:"v-app-project-media__player-wrap__payer"},[t("path",{d:"m380-300 280-180-280-180v360ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})],-1)),De=D(()=>t("div",{class:"v-app-project-media__player-wrap__title app-font-small"}," accéder à la vidéo ",-1)),Me=D(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:"white",class:"v-app-project-media__player-wrap__payer"},[t("path",{d:"m380-300 280-180-280-180v360ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})],-1)),xe=A({__name:"AppProjectMedia",props:{projectMediaData:{}},setup(i){const c=i,r=j(()=>ye(c.projectMediaData.content.body));function u(){$().push(`/project/${c.projectMediaData.slug}`)}return(_,v)=>{var s;return a(),n("section",{class:J(["v-app-project-media",(s=e(r))==null?void 0:s.type]),onClick:u},[t("img",{class:"v-app-project-media__cover",src:_.projectMediaData.headerImage[0].resize.reg,style:G({objectPosition:_.projectMediaData.headerImage[0].focus})},null,12,fe),t("div",je,[t("div",ge,h(_.projectMediaData.content.title),1),t("div",we,h(_.projectMediaData.content.headertitle),1)]),e(r)?(a(),n("div",$e,[t("div",Te,h(e(r).content.credits),1),e(r).content.date?(a(),n("div",ke,"publié le "+h(e(X)(e(r).content.date)),1)):f("",!0)])):f("",!0),e(r)?(a(),n("div",{key:1,class:"v-app-project-media__player-wrap",onClick:v[0]||(v[0]=R(y=>("useRouter"in _?_.useRouter:e($))().push({query:{target:"media"},path:`/project/${c.projectMediaData.slug}`}),["stop"]))},[e(r).type==="spotify"?(a(),n(g,{key:0},[qe,be],64)):e(r).type==="video"?(a(),n(g,{key:1},[De,Me],64)):f("",!0)])):f("",!0)],2)}}});const E=P(xe,[["__scopeId","data-v-080137ad"]]),Ce=i=>(F("data-v-4b0c54d8"),i=i(),N(),i),Be={class:"v-projects"},Ae={class:"v-project__content app-show-background-on-nav"},Pe={class:"v-project__content__grid"},ze={class:"v-project__section v-project__section--full"},Le={style:{display:"flex","align-items":"center","justify-content":"center"}},Se={class:"v-project__filter__text"},Ee=Ce(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})],-1)),Re={key:1,class:"v-project__filter--list",style:{display:"flex",gap:"1rem","flex-wrap":"wrap","justify-content":"center"}},Ze=["onClick"],Fe={class:"v-project__section"},Ne={key:1,class:"v-project__section v-project__section--full"},Ve={style:{"min-height":"50vh",display:"flex","align-items":"center","justify-content":"center",width:"100%"}},Ie={key:0,style:{"text-align":"center"}},He={class:"v-project__section"},Oe=A({__name:"projects",setup(i){const c=U(),r=$(),u=k(void 0),_=k(void 0),v=k(void 0),s=j(()=>!p.value||!v.value?null:y(v.value));function y(d){return Object.values(d).filter(l=>l.content.device===p.value)}function M(d){return Object.values(d).sort((m,w)=>{const o=new Date(m.content.datestart).getTime(),T=new Date(w.content.datestart).getTime();if(o!==T)return T-o;const S=m.content.dateend?new Date(m.content.dateend).getTime():0;return(w.content.dateend?new Date(w.content.dateend).getTime():0)-S})}K(async()=>{var l,m;const d=await Q("projects");u.value=(l=d.options.headerImage)==null?void 0:l.resize.tiny,_.value=d.options.headerTitle,v.value=M(d.children),z(((m=d.options.headerImage)==null?void 0:m.url)||"")});function z(d){const l=new Image;l.src=d,l.addEventListener("load",()=>u.value=d)}const p=k(c.query.q||null),L=j(()=>p.value===null||typeof p.value!="string"?null:C(p.value)?b[p.value]:null);return W(()=>c.query.q,d=>{p.value=d}),j(()=>p.value===null||typeof p.value!="string"?null:C(p.value)?V[p.value]:null),(d,l)=>{const m=me,w=ee;return a(),n("section",Be,[B(Y,{"header-cover":e(u),"header-text":e(_),"without-body":!0},null,8,["header-cover","header-text"]),t("div",Ae,[t("div",Pe,[t("div",ze,[t("div",Le,[e(L)?(a(),n("div",{key:0,class:"v-project__filter",onClick:l[0]||(l[0]=o=>e(r).push({query:{}}))},[t("div",Se,h(e(L)),1),Ee])):(a(),n("div",Re,[(a(!0),n(g,null,x(e(b),(o,T)=>(a(),n("div",{class:"app-button app-button--small",onClick:S=>e(r).push({query:{q:T}})},h(o),9,Ze))),256))]))])]),e(s)?(a(),n(g,{key:0},[e(s).length>0?(a(!0),n(g,{key:0},x(e(s),o=>(a(),n("div",Fe,[o.content.device==="library"?(a(),q(E,{key:0,"project-media-data":o},null,8,["project-media-data"])):(a(),q(m,{key:1,title:o.content.title,content:o.content.headertitle,"project-type":o.content.device,img_src:o.headerImage[0].resize.reg,slug:o.slug,date_start:o.content.datestart,is_project_with_duration:o.content.isprojectwithduration,date_end:o.content.dateend},null,8,["title","content","project-type","img_src","slug","date_start","is_project_with_duration","date_end"]))]))),256)):(a(),n("div",Ne,[t("div",Ve,[typeof e(p)=="string"&&e(C)(e(p))?(a(),n("h4",Ie,[Z("Il n'y a pas encore de projet pour "),t("span",{class:"app-button app-button--small",onClick:l[1]||(l[1]=o=>e(r).push({query:{q:""}}))},h(e(b)[e(p)]),1)])):f("",!0)])]))],64)):(a(!0),n(g,{key:1},x(e(v),o=>(a(),n("div",He,[o.content.device==="library"?(a(),q(E,{key:0,"project-media-data":o},null,8,["project-media-data"])):(a(),q(m,{key:1,title:o.content.title,content:o.content.headertitle,"project-type":o.content.device,img_src:o.headerImage[0].resize.reg,slug:o.slug,date_start:o.content.datestart,is_project_with_duration:o.content.isprojectwithduration,date_end:o.content.dateend},null,8,["title","content","project-type","img_src","slug","date_start","is_project_with_duration","date_end"]))]))),256))])]),B(w)])}}});const Qe=P(Oe,[["__scopeId","data-v-4b0c54d8"]]);export{Qe as default};
