import{g as y,r as m,G as _,o as d,c as u,a as i,H as a,I as l,i as e,v as c,t as f,x as R}from"./entry.8021b8e3.js";const h=["onSubmit"],x={class:"app-form__group"},E={class:"app-form__group"},j={key:0,class:"app-button--small",type:"submit"},w={key:1,style:{"text-align":"center"}},P={key:2,style:{"text-align":"center"}},V=y({__name:"AppForm",setup(b){let s=m("nothing"),r=m("");const o=_({nom:"",prenom:"",institution:"",email:"",nomProjet:"",description:""}),v=async()=>{g()};async function g(){if(s.value="sending PROGRESS",r.value="",o.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)===null){s.value="sending ERROR",r.value="Adresse mail incorrecte";return}const p=new URL("https://modus-admin.sdrvl.ch/contact?");for(const t in o)p.searchParams.append(t,o[t]);try{const n=await(await fetch(p.href,{method:"POST"})).json();console.log(n),window.setTimeout(()=>{n.succes===!1?(r.value="Problème(s):-error: "+n.alert.error+"-name: "+n.alert.name,s.value="sending ERROR"):(r.value=`Votre message a bien été envoyé. Nous revenons vers vous au plus vite!
`,s.value="sending OK")},2500)}catch{r.value="Erreur de connection, réesséyez…",s.value="sending ERROR"}}return(p,t)=>(d(),u("form",{class:"app-form",onSubmit:R(v,["prevent"])},[i("div",x,[a(i("input",{type:"text",id:"nom",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=n=>e(o).nom=n),required:""},null,512),[[l,e(o).nom]]),a(i("input",{type:"text",id:"prenom",placeholder:"Prénom","onUpdate:modelValue":t[1]||(t[1]=n=>e(o).prenom=n),required:""},null,512),[[l,e(o).prenom]])]),i("div",E,[a(i("input",{type:"text",id:"institution",placeholder:"Institution","onUpdate:modelValue":t[2]||(t[2]=n=>e(o).institution=n),required:""},null,512),[[l,e(o).institution]]),a(i("input",{type:"email",id:"email",placeholder:"E-mail","onUpdate:modelValue":t[3]||(t[3]=n=>e(o).email=n),required:""},null,512),[[l,e(o).email]])]),a(i("input",{type:"text",id:"nomProjet",placeholder:"Titre du projet","onUpdate:modelValue":t[4]||(t[4]=n=>e(o).nomProjet=n),required:""},null,512),[[l,e(o).nomProjet]]),a(i("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=n=>e(o).description=n),required:"",maxlength:"1250",placeholder:"Courte description du projet (objectifs, partenaires, montant du projet, etc./ 250 mots max)"},null,512),[[l,e(o).description]]),e(s)==="nothing"||e(s)==="sending ERROR"?(d(),u("button",j,"Envoyer")):e(s)==="sending PROGRESS"?(d(),u("div",w,"Envoie en cours…")):c("",!0),e(r).length>0?(d(),u("div",P,f(e(r)),1)):c("",!0)],40,h))}});export{V as _};
