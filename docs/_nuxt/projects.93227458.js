import{g as A,y as H,i as e,k as f,o as s,c as n,a as t,q as Z,t as h,z as F,x as y,b as B,w as O,d as P,B as b,e as G,_ as z,F as g,m as J,p as N,f as V,u as U,r as k,h as K,C as Q,D as W,E as x,G as q}from"./entry.0339f3d4.js";import{i as I,a as $,f as X,A as Y,b as C,_ as ee}from"./AppPage.0ad95b51.js";import"./precent.9cc4a1ca.js";function te(i,c){const r=new Date(i),u=c?new Date(c):null,_={month:"long",year:"2-digit"},v=new Intl.DateTimeFormat("fr-FR",_),a=v.format(r);if(!u)return a;const j=v.format(u);return a===j?a:`${a} > ${j}`}const oe={class:"v-app-project-item__header"},se=["src"],ae={class:"v-app-project-item__header__date"},ne={class:"v-app-project-item__body child-remove-margin"},re={class:"v-app-project-item__title"},ie=["innerHTML"],ce={class:"v-app-project-item__bottom"},pe={class:"v-app-project-item__bottom__container"},de=["src"],_e={key:1,class:"v-app-project-item__header__type"},le={class:"v-app-project-item__bottom__container"},ue={key:0,class:"v-app-project-item__status-button",style:{"font-weight":"600","font-size":".75rem",border:"solid 2px",display:"flex","align-items":"center","justify-content":"center",gap:".5rem","border-radius":"2rem",padding:".015rem .5rem .025rem","min-width":"3rem","text-align":"center"}},ve={class:"v-app-project-item__bottom__container"},he=A({__name:"AppProjectItem",props:{projectType:{},title:{},content:{},img_src:{},object_position:{},slug:{},date_start:{},is_project_with_duration:{},date_end:{}},setup(i){const c=i;H(a=>({"4155a650":e(_)}));const r=f(()=>c.projectType?I[c.projectType]:null),u=f(()=>c.is_project_with_duration==="false"?null:c.date_end===void 0?"En cours":new Date(c.date_end).getTime()<new Date().getTime()?"Terminé":"En cours"),_=f(()=>u.value==="En cours"?"var(--app-color-orange)":"var(--app-color-main--dark)");function v(){b().push(`/project/${c.slug}`)}return(a,j)=>{const M=G;return s(),n("section",{class:"v-app-project-item",onClick:v},[t("div",oe,[t("img",{class:"v-app-project-item__header__img",alt:"project cover",src:a.img_src,style:Z({objectPosition:a.object_position})},null,12,se),t("div",ae,h(e(te)(a.date_start,a.date_end)),1)]),t("div",ne,[t("h4",re,h(a.title),1),t("div",{class:"v-app-project-item__content child-remove-margin",innerHTML:a.content},null,8,ie)]),t("div",ce,[t("div",pe,[t("div",{class:"v-app-project-item__bottom__icon-box",onClick:j[0]||(j[0]=F(L=>("useRouter"in a?a.useRouter:e(b))().push({query:{q:a.projectType}}),["stop"]))},[e(r)?(s(),n("img",{key:0,class:"v-app-project-item__bottom__icon-box__img",alt:"project icon",src:`/project_type_icons/${e(r)}`},null,8,de)):y("",!0),a.projectType?(s(),n("h4",_e,h(e($)[a.projectType]),1)):y("",!0)])]),t("div",le,[e(u)?(s(),n("div",ue,h(e(u)),1)):y("",!0),t("div",ve,[B(M,{class:"app-button app-button--small",href:`/project/${a.slug}`},{default:O(()=>[P("Découvrir")]),_:1},8,["href"])])])])])}}});const me=z(he,[["__scopeId","data-v-b6937271"]]);function ye(i){return typeof i!="string"?(console.error("projectBody must be type of string"),null):JSON.parse(i).find(r=>r.type==="spotify"||r.type==="video")}const D=i=>(N("data-v-080137ad"),i=i(),V(),i),je=["src"],fe={class:"v-app-project-media__header"},ge={class:"v-app-project-media__header__title app-font-h1"},we={class:"v-app-project-media__header__headerTitle app-font-h4"},$e={key:0,class:"v-app-project-media__details"},be={class:"app-font-small"},Te={key:0,class:"app-font-small"},ke=D(()=>t("div",{class:"v-app-project-media__player-wrap__title app-font-small"}," accéder au podcast ",-1)),qe=D(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:"white",class:"v-app-project-media__player-wrap__payer"},[t("path",{d:"m380-300 280-180-280-180v360ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})],-1)),De=D(()=>t("div",{class:"v-app-project-media__player-wrap__title app-font-small"}," accéder à la vidéo ",-1)),Me=D(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:"white",class:"v-app-project-media__player-wrap__payer"},[t("path",{d:"m380-300 280-180-280-180v360ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})],-1)),xe=A({__name:"AppProjectMedia",props:{projectMediaData:{}},setup(i){const c=i,r=f(()=>ye(c.projectMediaData.content.body));function u(){b().push(`/project/${c.projectMediaData.slug}`)}return(_,v)=>{var a;return s(),n("section",{class:J(["v-app-project-media",(a=e(r))==null?void 0:a.type]),onClick:u},[t("img",{class:"v-app-project-media__cover",src:_.projectMediaData.headerImage[0].resize.reg,style:Z({objectPosition:_.projectMediaData.headerImage[0].focus})},null,12,je),t("div",fe,[t("div",ge,h(_.projectMediaData.content.title),1),t("div",we,h(_.projectMediaData.content.headertitle),1)]),e(r)?(s(),n("div",$e,[t("div",be,h(e(r).content.credits),1),e(r).content.date?(s(),n("div",Te,"publié le "+h(e(X)(e(r).content.date)),1)):y("",!0)])):y("",!0),e(r)?(s(),n("div",{key:1,class:"v-app-project-media__player-wrap",onClick:v[0]||(v[0]=F(j=>("useRouter"in _?_.useRouter:e(b))().push({query:{target:"media"},path:`/project/${c.projectMediaData.slug}`}),["stop"]))},[e(r).type==="spotify"?(s(),n(g,{key:0},[ke,qe],64)):e(r).type==="video"?(s(),n(g,{key:1},[De,Me],64)):y("",!0)])):y("",!0)],2)}}});const R=z(xe,[["__scopeId","data-v-080137ad"]]),Ce=i=>(N("data-v-e52df273"),i=i(),V(),i),Be={class:"v-projects"},Pe={class:"v-project__content app-show-background-on-nav"},Ae={class:"v-project__content__grid"},ze={class:"v-project__section v-project__section--full"},Le={style:{display:"flex","align-items":"center","justify-content":"center"}},Se={class:"v-project__filter__text"},Ee=Ce(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})],-1)),Re={key:1,class:"v-project__filter--list",style:{display:"flex",gap:"1rem","flex-wrap":"wrap","justify-content":"center"}},Ze=["onClick"],Fe={key:0,class:"app-font-small",style:{display:"flex","align-items":"center","justify-content":"center","margin-top":"1rem"}},Ne={class:"v-project__section"},Ve={key:1,class:"v-project__section v-project__section--full"},Ie={style:{"min-height":"50vh",display:"flex","align-items":"center","justify-content":"center",width:"100%"}},He={key:0,style:{"text-align":"center"}},Oe={class:"v-project__section"},Ge=A({__name:"projects",setup(i){const c=U(),r=b(),u=k(void 0),_=k(void 0),v=k(void 0),a=f(()=>!p.value||!v.value?null:j(v.value));function j(d){return Object.values(d).filter(l=>l.content.device===p.value)}function M(d){return Object.values(d).sort((m,w)=>{const o=new Date(m.content.datestart).getTime(),T=new Date(w.content.datestart).getTime();if(o!==T)return T-o;const E=m.content.dateend?new Date(m.content.dateend).getTime():0;return(w.content.dateend?new Date(w.content.dateend).getTime():0)-E})}K(async()=>{var l,m;const d=await Q("projects");u.value=(l=d.options.headerImage)==null?void 0:l.resize.tiny,_.value=d.options.headerTitle,v.value=M(d.children),L(((m=d.options.headerImage)==null?void 0:m.url)||"")});function L(d){const l=new Image;l.src=d,l.addEventListener("load",()=>u.value=d)}const p=k(c.query.q||null),S=f(()=>p.value===null||typeof p.value!="string"?null:C(p.value)?$[p.value]:null);return W(()=>c.query.q,d=>{p.value=d}),f(()=>p.value===null||typeof p.value!="string"?null:C(p.value)?I[p.value]:null),(d,l)=>{const m=me,w=ee;return s(),n("section",Be,[B(Y,{"header-cover":e(u),"header-text":e(_),"without-body":!0},null,8,["header-cover","header-text"]),t("div",Pe,[t("div",Ae,[t("div",ze,[t("div",Le,[e(S)?(s(),n("div",{key:0,class:"v-project__filter",onClick:l[0]||(l[0]=o=>e(r).push({query:{}}))},[t("div",Se,h(e(S)),1),Ee])):(s(),n("div",Re,[(s(!0),n(g,null,x(e($),(o,T)=>(s(),n("div",{class:"app-button app-button--small",onClick:E=>e(r).push({query:{q:T}})},h(o),9,Ze))),256))]))]),e(p)?(s(),n("div",Fe,[P(" Déscription de la typologie "),t("em",null,h(e($)[e(p)]),1)])):y("",!0)]),e(a)?(s(),n(g,{key:0},[e(a).length>0?(s(!0),n(g,{key:0},x(e(a),o=>(s(),n("div",Ne,[o.content.device==="library"?(s(),q(R,{key:0,"project-media-data":o},null,8,["project-media-data"])):(s(),q(m,{key:1,title:o.content.title,content:o.content.headertitle,"project-type":o.content.device,img_src:o.headerImage[0].resize.reg,object_position:o.headerImage[0].focus,slug:o.slug,date_start:o.content.datestart,is_project_with_duration:o.content.isprojectwithduration,date_end:o.content.dateend},null,8,["title","content","project-type","img_src","object_position","slug","date_start","is_project_with_duration","date_end"]))]))),256)):(s(),n("div",Ve,[t("div",Ie,[typeof e(p)=="string"&&e(C)(e(p))?(s(),n("h4",He,[P("Il n'y a pas encore de projet pour "),t("span",{class:"app-button app-button--small",onClick:l[1]||(l[1]=o=>e(r).push({query:{q:""}}))},h(e($)[e(p)]),1)])):y("",!0)])]))],64)):(s(!0),n(g,{key:1},x(e(v),o=>(s(),n("div",Oe,[o.content.device==="library"?(s(),q(R,{key:0,"project-media-data":o},null,8,["project-media-data"])):(s(),q(m,{key:1,title:o.content.title,content:o.content.headertitle,"project-type":o.content.device,img_src:o.headerImage[0].resize.reg,object_position:o.headerImage[0].focus,slug:o.slug,date_start:o.content.datestart,is_project_with_duration:o.content.isprojectwithduration,date_end:o.content.dateend},null,8,["title","content","project-type","img_src","object_position","slug","date_start","is_project_with_duration","date_end"]))]))),256))])]),B(w)])}}});const We=z(Ge,[["__scopeId","data-v-e52df273"]]);export{We as default};
