import{g,r as _,M as f,o as c,c as m,a,z as p,C as l,i as e,y as h,t as x,E as R,h as j,A as b,b as v,_ as P}from"./entry.782d76ea.js";import{A as E,_ as w}from"./AppPage.be4f3ed7.js";import"./precent.6ef749ca.js";const U=["onSubmit"],V={class:"app-form__group"},S={class:"app-form__group"},O={key:0,class:"app-button--small",type:"submit"},A={key:1,style:{"text-align":"center"}},q={key:2,style:{"text-align":"center"}},C=g({__name:"AppForm",setup(y){let s=_("nothing"),r=_("");const t=f({nom:"",prenom:"",institution:"",email:"",nomProjet:"",description:""}),i=async()=>{d()};async function d(){if(s.value="sending PROGRESS",r.value="",t.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)===null){s.value="sending ERROR",r.value="Adresse mail incorrecte";return}const u=new URL("https://modus-admin.sdrvl.ch/contact?");for(const o in t)u.searchParams.append(o,t[o]);try{const n=await(await fetch(u.href,{method:"POST"})).json();console.log(n),window.setTimeout(()=>{n.succes===!1?(r.value="Problème(s):-error: "+n.alert.error+"-name: "+n.alert.name,s.value="sending ERROR"):(r.value=`Votre message a bien été envoyé. Nous revenons vers vous au plus vite!
`,s.value="sending OK")},2500)}catch{r.value="Erreur de connection, réesséyez…",s.value="sending ERROR"}}return(u,o)=>(c(),m("form",{class:"app-form",onSubmit:R(i,["prevent"])},[a("div",V,[p(a("input",{type:"text",id:"nom",placeholder:"Nom","onUpdate:modelValue":o[0]||(o[0]=n=>e(t).nom=n),required:""},null,512),[[l,e(t).nom]]),p(a("input",{type:"text",id:"prenom",placeholder:"Prénom","onUpdate:modelValue":o[1]||(o[1]=n=>e(t).prenom=n),required:""},null,512),[[l,e(t).prenom]])]),a("div",S,[p(a("input",{type:"text",id:"institution",placeholder:"Institution","onUpdate:modelValue":o[2]||(o[2]=n=>e(t).institution=n),required:""},null,512),[[l,e(t).institution]]),p(a("input",{type:"email",id:"email",placeholder:"E-mail","onUpdate:modelValue":o[3]||(o[3]=n=>e(t).email=n),required:""},null,512),[[l,e(t).email]])]),p(a("input",{type:"text",id:"nomProjet",placeholder:"Titre du projet","onUpdate:modelValue":o[4]||(o[4]=n=>e(t).nomProjet=n),required:""},null,512),[[l,e(t).nomProjet]]),p(a("textarea",{id:"description","onUpdate:modelValue":o[5]||(o[5]=n=>e(t).description=n),required:"",maxlength:"1250",placeholder:"Courte description du projet (objectifs, partenaires, montant du projet, etc./ 250 mots max)"},null,512),[[l,e(t).description]]),e(s)==="nothing"||e(s)==="sending ERROR"?(c(),m("button",O,"Envoyer")):e(s)==="sending PROGRESS"?(c(),m("div",A,"Envoie en cours…")):h("",!0),e(r).length>0?(c(),m("div",q,x(e(r)),1)):h("",!0)],40,U))}});const M={class:"v-project-form"},T={class:"v-project-form__bottom_content"},k={class:"v-project-form__bottom_content__section"},D=g({__name:"proposer-un-projet",setup(y){const s=_(void 0),r=_(void 0),t=_(void 0);return j(async()=>{var d;const i=await b("proposer-un-projet");s.value=(d=i.options.headerImage)==null?void 0:d.resize.xxl,r.value=i.options.headerTitle,t.value=i.body}),(i,d)=>{const u=C,o=w;return c(),m("section",M,[v(E,{"header-cover":e(s),"header-text":e(r),"body-content":e(t)},null,8,["header-cover","header-text","body-content"]),a("div",T,[a("div",k,[v(u)])]),v(o)])}}});const B=P(D,[["__scopeId","data-v-16030455"]]);export{B as default};
