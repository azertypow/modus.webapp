<template>
    <main class="v-index" >
        <div
            class="v-index__header"
        >
            <app-header/>
        </div>

        <div
            class="v-index__content"
            ref="contentElement"
        >
            <section
                class="v-index__section"
            >
                <div
                    class="v-index__grid__coll-full"
                >
                    <div
                        class="v-index__section__video_player"
                    >
                        <app-video link="hello"/>
                    </div>
                </div>
            </section>
            <section
                class="v-index__section"
            >
                <div
                    class="v-index__grid__coll-full"
                >
                    <p>
                        Le 21e siècle sera marqué par le défi imposé par le changement clima- tique. En Suisse, le secteur des
                        transports représente aujourd’hui 31% des émissions contre 24% dans le monde. La mobilité constitue donc 30%
                        du problème mais également 30% de la solution. La Fondation Modus a pour vocation de participer à relever le
                        défi de la décarbo- nation en soutenant les acteurs de Genève pour atteindre l’objectif 0 carbone à
                        l’horizon 2050.
                    </p>
                    <p>
                        La Fondation Modus prend le parti d’agir à l’échelle locale en se po- sitionnant comme un accélérateur du
                        changement et un soutien aux acteurs déjà en place. Ce soutien se matérialise à travers des interven- tions
                        concrètes sur le territoire et auprès des habitant.e.s du Canton de Genève.
                    </p>
                </div>
            </section>

            <section
                class="v-index__section"
            >
                <div
                    class="v-index__section__title"
                >
                    <h2>Missions</h2>
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--with-gutter"
                >
                    <div
                        class="v-index__grid__coll-1-2"
                    >
                        <p>
                            Le 21e siècle sera marqué par le défi imposé par le changement climatique. En Suisse, le secteur des transports représente aujourd’hui 31% des émissions contre 24% dans le monde. La mobili- té constitue donc 30% du problème mais égale- ment 30% de la solution. La Fondation Modus a pour vocation de participer à relever le défi de la décarbonation en soutenant les acteurs de Ge- nève pour atteindre l’objectif 0 carbone à l’hori- zon 2050.
                        </p>

                        <p>
                            La Fondation Modus prend le parti d’agir à l’échelle locale en se positionnant comme un accélérateur du changement et un soutien aux acteurs déjà en place. Ce soutien se matérialise à travers des interventions concrètes sur le ter- ritoire et auprès des habitant.e.s du Canton de Genève.
                        </p>

                        <p>
                            <strong>
                                Pour poursuivre cette ambition, la Fondation Modus s’est fixée 5 missions :
                            </strong>
                        </p>
                        <ul>
                            <li>Soutenir les acteurs de la mobilité dans leurs projets ;</li>
                            <li>Stimuler les interconnaissances entre les acteurs ;</li>
                            <li>Mettre à disposition des approches, des idées et des connaissances nouvelles ;</li>
                            <li>Proposer de nouveaux imaginaires et valeurs sociales de la mobilité ;</li>
                            <li>Documenter et disséminer le changement</li>
                        </ul>
                    </div>
                    <div
                        class="v-index__grid__coll-1-2"
                    >
                        <div
                            class="v-index__section__content__sticky"
                        >
                            ilustration à droite
                        </div>
                    </div>
                </div>

            </section>

            <section
                class="v-index__section"
            >
                <div
                    class="v-index__section__title"
                >
                    <h2>Objectifs</h2>
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter"
                >
                    <img
                        alt="schema"
                        src="../assets/231023_schema_1-modus.jpg"
                    >
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter"
                >
                    <img
                        alt="schema"
                        src="../assets/231023_schema_2-modus.jpg"
                    >
                </div>

                <div
                    class="v-index__section__content v-index__grid"
                >
                    <div
                        class="v-index__grid__coll-full"
                    >
                        <p>
                            Le 21e siècle sera marqué par le défi imposé par le changement climatique. En Suisse,
                            le secteur des transports représente aujourd’hui 31% des émissions contre 24% dans le monde. La
                            mobilité constitue donc 30% du problème mais également 30% de la solution.
                        </p>
                    </div>
                </div>

            </section>
            <section
                class="v-index__section"
            >
                <div
                    class="v-index__section__title"
                >
                    <h2>Le collectif</h2>
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter"
                >
                    <div
                        class="v-index__grid__coll-1-4"
                    >
                        <h3>
                            L'équipe
                        </h3>
                        <app-image
                            status="Secrétaire Général"
                            name="Dr. Guillaume Drevon"
                        />
                    </div>
                    <div
                        class="v-index__grid__coll-3-4"
                    >
                        <h3>
                            Le conseil scientifique
                        </h3>
                        <div class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter" >
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-3"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                        </div>
                    </div>


                    <div
                        class="v-index__grid__coll-full"
                    >
                        <h3>
                            Le conseil scientifique
                        </h3>
                        <div class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter" >
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                            <div
                                class="v-index__grid__coll-1-4"
                            >
                                <app-image
                                    status="Secrétaire Général"
                                    name="Dr. Guillaume Drevon"
                                />
                            </div>
                        </div>
                    </div>

                </div>

            </section>
            <section
                class="v-index__section"
            >
                <div
                    class="v-index__section__title"
                >
                    <h2>Projets</h2>
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--wrap v-index__grid--with-gutter"
                >
                    <div
                        class="v-index__grid__coll-1-3"
                    >
                        <app-large-image
                            title=" Expérimentation Mobility Rewarding"
                        />
                    </div>

                    <div
                        class="v-index__grid__coll-1-3"
                    >
                        <app-large-image
                            title=" Expérimentation Mobility Rewarding"
                        />
                    </div>

                    <div
                        class="v-index__grid__coll-1-3"
                    >
                        <app-large-image
                            title=" Expérimentation Mobility Rewarding"
                        />
                    </div>
                </div>
            </section>

            <section
                class="v-index__section"
            >
                <div
                    class="v-index__section__title"
                >
                    <h2>Proposer un projet</h2>
                </div>

                <div
                    class="v-index__section__content v-index__grid v-index__grid--wrap"
                >
                    <div
                        class="v-index__grid__coll-full"
                    >
                        <p>
                            La Fondation Modus s’est donnée comme mission de soutenir les initiatives des acteurs locaux. Afin de
                            proposer un projet, nous vous demandons de bien vouloir vous reporter au formulaire de demande à
                            télécharger ici. Vous pourrez soumettre ensuite votre projet via le formulaire ci-dessous.
                        </p>
                    </div>
                </div>
                <div
                    class="v-index__section__content v-index__grid v-index__grid--centred v-index__grid--wrap"
                >
                    <div style="
                                    background: var(--app-color-main);
                                    width: 30vw;
                                    height: 30vw;
                                " ></div>
                </div>
                <div
                    class="v-index__section__content v-index__grid v-index__grid--centred v-index__grid--wrap"
                >
                    <button>Soumettre une demande de soutien</button>
                </div>


            </section>
        </div>

        <footer class="v-index__footer">
            <app-newsletter/>
        </footer>

        <img
            class="v-index__bottom-image"
            alt="image d'architecture urbaine"
            src="https://images.unsplash.com/photo-1696945147512-745188d0ef77?auto=format&fit=crop&q=80&w=2864&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
        />

        <div
            class="v-index__bottom"
        >
            <img
                alt="logo Modus fin de page"
                src="../assets/logo/Logo_Modus_blanc_sd-20230913.svg"
            />
        </div>

    </main>
</template>





<script lang="ts" setup>

import {Ref} from "vue";
import AppVideo from "~/components/AppVideo.vue";

const contentElement: Ref<null | HTMLElement> = ref(null)


onMounted(() => {
    nextTick(() => {
        if( ! (contentElement.value instanceof HTMLElement)) return

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    console.log('L\'élément est en intersection avec la fenêtre')
                } else {
                    console.log('L\'élément n\'est plus en intersection avec la fenêtre')
                }
            })
        }, {
            rootMargin: '0px 0px -500px 0px' // La marge positive pour déclencher l'événement
        })

        observer.observe(contentElement.value)
    })
})

</script>





<style lang="scss" scoped >
.v-index {
}

.v-index__section {
    box-sizing: border-box;
    padding-left: var(--app-gutter);
    padding-right: var(--app-gutter);
    max-width: 1300px;
    margin-left: auto;
    margin-right: auto;
}

.v-index__section__video_player {
    max-width: 40rem;
    margin: auto;
}

.v-index__section__content {
    position: relative;

    > img {
        display: block;
        width: 100%;
    }

    .v-index__section__content__sticky {
        position: sticky;
        top: 0;
    }
}


.v-index__section__title {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.v-index__grid {
    display: flex;
    flex-wrap: nowrap;

    &.v-index__grid--with-gutter {
        gap: var(--app-gutter);
    }

    &.v-index__grid--wrap {
        flex-wrap: wrap;
    }

    &.v-index__grid--centred {
        justify-content: center;
    }
}

[class*="v-index__grid__coll"] {
    > *:first-child {
        margin-top: 0 !important;
    }
    > *:last-child {
        margin-top: 0 !important;
    }
}

.v-index__grid__coll-full {
    width: 100%;
}

.v-index__grid__coll-1-2 {
    width: 50%;

    .v-index__grid--with-gutter & {
        width: calc( ( (100% + var(--app-gutter) ) / 2) - var( --app-gutter ) );
    }

    @media (max-width: 900px) {
        width: 75%;

        .v-index__grid--with-gutter & {
            width: calc( ( (100% + var(--app-gutter) ) / 3) - var( --app-gutter ) );
        }
    }

    @media (max-width: 700px) {
        width: 100%;

        .v-index__grid--with-gutter & {
            width: 100%;
        }
    }
}

.v-index__grid__coll-1-4 {
    width: 25%;

    .v-index__grid--with-gutter & {
        width: calc( ( (100% + var(--app-gutter) ) / 4) - var( --app-gutter ) );
    }

    @media (max-width: 1200px) {
        width: calc(100% / 3);

        .v-index__grid--with-gutter & {
            width: calc( ( (100% + var(--app-gutter) ) / 3) - var( --app-gutter ) );
        }
    }

    @media (max-width: 900px) {
        width: 50%;

        .v-index__grid--with-gutter & {
            width: calc( ( (100% + var(--app-gutter) ) / 2) - var( --app-gutter ) );
        }
    }

    @media (max-width: 700px) {
        width: 100%;

        .v-index__grid--with-gutter & {
            width: 100%;
        }
    }
}

.v-index__grid__coll-1-3 {
    width: calc(100% / 3);

    .v-index__grid--with-gutter & {
        width: calc( ( (100% + var(--app-gutter) ) / 3) - var( --app-gutter ) );
    }

    @media (max-width: 900px) {
        width: 50%;

        .v-index__grid--with-gutter & {
            width: calc( ( (100% + var(--app-gutter) ) / 2) - var( --app-gutter ) );
        }
    }


    @media (max-width: 700px) {
        width: 100%;

        .v-index__grid--with-gutter & {
            width: 100%;
        }
    }
}

.v-index__grid__coll-3-4 {
    width: 75%;

    .v-index__grid--with-gutter & {
        width: calc( ( (100% + var(--app-gutter) ) / 4 * 3) - var( --app-gutter ) );
    }

    @media (max-width: 1200px) {
        width: 100%;

        .v-index__grid--with-gutter & {
            width: 100%;
        }
    }
}

.v-index__header {
    background: white;
    z-index: 0;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    position: fixed;
}

.v-index__content {
    background: white;
    position: relative;
    z-index: 10;
    width: 100%;
}

.v-index__footer {
    background: white;
    position: relative;
    z-index: 10;
}

.v-index__bottom-image {
    display: block;
    width: 100%;
    height: 100vh;
    position: relative;
    z-index: 10;
    object-fit: cover;
}


.v-index__bottom {
    position: sticky;
    bottom: 0;
    z-index: 1;
    background: linear-gradient(to right, var(--app-color-main), var(--app-color-main--dark));

    > img {
        width: 100%;
        height: auto;
        display: block;
    }
}
</style>
